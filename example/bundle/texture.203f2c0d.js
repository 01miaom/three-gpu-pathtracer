var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},n={},t=e.parcelRequire5b70;null==t&&((t=function(e){if(e in a)return a[e].exports;if(e in n){var t=n[e];delete n[e];var r={id:e,exports:{}};return a[e]=r,t.call(r.exports,r,r.exports),r.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,a){n[e]=a},e.parcelRequire5b70=t),t.register("dliAh",(function(e,a){e.exports=new URL(t("27Lyk").resolve("j2Fty"),import.meta.url).toString()})),t("27Lyk").register(JSON.parse('{"c2aSa":"texture.203f2c0d.js","j2Fty":"Uvrefmap_checker_util-mark.88b9dabf.jpeg","a9GaN":"aoRender.2d79cbc2.js","emQ2m":"depthOfField.2b3ff9c8.js","iGW68":"aoRender.5b603675.js"}'));var r=t("ilwiq"),o=t("RPVlj"),i=t("5Rd1x"),s=t("4CEV9"),d=t("cVdfP"),l=t("891vQ"),m=t("jiuw3");let c,u,h,g,p,C,b,w,f,v;const y={material1:{color:"#ffc766",emissive:"#000000",emissiveIntensity:1,roughness:.1,metalness:.8,ior:1.495,transmission:0,opacity:1,matte:!1,castShadow:!0},material2:{color:"#db7157",emissive:"#000000",emissiveIntensity:1,roughness:.8,metalness:.1,transmission:0,ior:1.495,opacity:1,matte:!1,castShadow:!0},material3:{color:"#000000",roughness:.01,metalness:.05,matte:!1,castShadow:!0},multipleImportanceSampling:!0,stableNoise:!1,environmentIntensity:3,environmentRotation:0,environmentBlur:0,backgroundBlur:.05,bounces:5,samplesPerFrame:1,acesToneMapping:!0,resolutionScale:1/window.devicePixelRatio,transparentTraversals:20,filterGlossyFactor:.5,tiles:1,backgroundAlpha:1,checkerboardTransparency:!0};window.location.hash.includes("transmission")&&(y.material1.metalness=0,y.material1.roughness=.05,y.material1.transmission=1,y.material1.color="#ffffff",y.bounces=10);function S(){const e=window.innerWidth,a=window.innerHeight,n=y.resolutionScale,t=window.devicePixelRatio;g.setSize(e*n*t,a*n*t),g.reset(),c.setSize(e,a),c.setPixelRatio(window.devicePixelRatio*n),p.aspect=e/a,p.updateProjectionMatrix()}function F(){g.reset()}function x(){const e=w.generate(b,y.environmentBlur);g.material.envMapInfo.updateFrom(e),f.environment=e,g.reset()}function M(){requestAnimationFrame(M),g.material.materials.updateFrom(h.materials,h.textures),g.material.filterGlossyFactor=y.filterGlossyFactor,g.material.environmentIntensity=y.environmentIntensity,g.material.backgroundBlur=y.backgroundBlur,g.material.bounces=y.bounces,g.material.backgroundAlpha=y.backgroundAlpha,g.material.physicalCamera.updateFrom(p),p.updateMatrixWorld(),y.backgroundAlpha<1?f.background=null:f.background=f.environment;for(let e=0,a=y.samplesPerFrame;e<a;e++)g.update();g.samples<1&&c.render(f,p),c.autoClear=!1,C.material.map=g.target.texture,C.render(c),c.autoClear=!0,v.innerText=`Samples: ${Math.floor(g.samples)}`}window.innerWidth/window.innerHeight<.65&&(y.bounces=Math.max(y.bounces,6),y.resolutionScale*=.5,y.tiles=2,y.multipleImportanceSampling=!1,y.environmentBlur=.35),async function(){c=new r.WebGLRenderer({antialias:!0}),c.toneMapping=r.ACESFilmicToneMapping,c.setClearColor(0,0),document.body.appendChild(c.domElement),p=new s.PhysicalCamera(75,window.innerWidth/window.innerHeight,.025,500),p.position.set(-4,2,3),g=new s.PathTracingRenderer(c),g.alpha=!0,g.camera=p,g.material=new s.PhysicalPathTracingMaterial,g.material.setDefine("TRANSPARENT_TRAVERSALS",y.transparentTraversals),g.material.setDefine("FEATURE_MIS",Number(y.multipleImportanceSampling)),g.tiles.set(y.tiles,y.tiles),C=new o.FullScreenQuad(new r.MeshBasicMaterial({map:g.target.texture,blending:r.CustomBlending})),u=new i.OrbitControls(p,c.domElement),u.addEventListener("change",(()=>{g.reset()})),f=new r.Scene,v=document.getElementById("samples"),w=new s.BlurredEnvMapGenerator(c);const e=new Promise((e=>{(new l.RGBELoader).load("https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/textures/equirectangular/royal_esplanade_1k.hdr",(a=>{b=a,x(),e()}))})),a=new d.PathTracingSceneWorker,n=(new r.TextureLoader).loadAsync(t("dliAh")).then((e=>{e.repeat.set(2,2),e.wrapS=e.wrapT=r.RepeatWrapping;const n=new r.Mesh(new r.PlaneGeometry(10,10),new r.MeshStandardMaterial({map:e}));return n.rotation.x=-Math.PI/2,n.geometry=n.geometry.toNonIndexed(),n.geometry.clearGroups(),a.generate(n)})).then((e=>{h=e,f.add(e.scene);const{bvh:n,textures:t,materials:r}=e,o=n.geometry,i=g.material;i.bvh.updateFrom(n),i.normalAttribute.updateFrom(o.attributes.normal),i.tangentAttribute.updateFrom(o.attributes.tangent),i.uvAttribute.updateFrom(o.attributes.uv),i.materialIndexAttribute.updateFrom(o.attributes.materialIndex),i.textures.setTextures(c,2048,2048,t),i.materials.updateFrom(r,t),a.dispose()}));await Promise.all([n,e]),document.getElementById("loading").remove(),document.body.classList.add("checkerboard"),S(),window.addEventListener("resize",S);const R=new m.GUI;R.close();const T=R.addFolder("Path Tracing");T.add(y,"acesToneMapping").onChange((e=>{c.toneMapping=e?r.ACESFilmicToneMapping:r.NoToneMapping,C.material.needsUpdate=!0})),T.add(y,"stableNoise").onChange((e=>{g.stableNoise=e})),T.add(y,"multipleImportanceSampling").onChange((e=>{g.material.setDefine("FEATURE_MIS",Number(e)),g.reset()})),T.add(y,"tiles",1,4,1).onChange((e=>{g.tiles.set(e,e)})),T.add(y,"samplesPerFrame",1,10,1),T.add(y,"filterGlossyFactor",0,1).onChange((()=>{g.reset()})),T.add(y,"bounces",1,30,1).onChange((()=>{g.reset()})),T.add(y,"transparentTraversals",0,40,1).onChange((e=>{g.material.setDefine("TRANSPARENT_TRAVERSALS",e),g.reset()})),T.add(y,"resolutionScale",.1,1).onChange((()=>{S()}));const A=R.addFolder("Environment");A.add(y,"environmentIntensity",0,10).onChange((()=>{g.reset()})),A.add(y,"environmentRotation",0,2*Math.PI).onChange((e=>{g.material.environmentRotation.setFromMatrix4((new r.Matrix4).makeRotationY(e)),g.reset()})),A.add(y,"environmentBlur",0,1).onChange((()=>{x()})),A.add(y,"backgroundBlur",0,1).onChange((()=>{g.reset()})),A.add(y,"backgroundAlpha",0,1).onChange((()=>{g.reset()})),A.add(y,"checkerboardTransparency").onChange((e=>{e?document.body.classList.add("checkerboard"):document.body.classList.remove("checkerboard")}));const k=R.addFolder("Camera");k.add(p,"focusDistance",1,100).onChange(F),k.add(p,"apertureBlades",0,10,1).onChange((function(e){p.apertureBlades=0===e?0:Math.max(e,3),this.updateDisplay(),F()})),k.add(p,"apertureRotation",0,12.5).onChange(F),k.add(p,"anamorphicRatio",.1,10).onChange(F),k.add(p,"bokehSize",0,50).onChange(F).listen(),k.add(p,"fStop",.3,20).onChange(F).listen(),k.add(p,"fov",25,100).onChange((()=>{p.updateProjectionMatrix(),F()})).listen();const P=R.addFolder("Shell Material");P.addColor(y.material1,"color").onChange(F),P.addColor(y.material1,"emissive").onChange(F),P.add(y.material1,"emissiveIntensity",0,50,.01).onChange(F),P.add(y.material1,"roughness",0,1).onChange(F),P.add(y.material1,"metalness",0,1).onChange(F),P.add(y.material1,"opacity",0,1).onChange(F),P.add(y.material1,"transmission",0,1).onChange(F),P.add(y.material1,"ior",.9,3).onChange(F),P.add(y.material1,"matte").onChange(F),P.add(y.material1,"castShadow").onChange(F),P.close();const I=R.addFolder("Ball Material");I.addColor(y.material2,"color").onChange(F),I.addColor(y.material2,"emissive").onChange(F),I.add(y.material2,"emissiveIntensity",0,50,.01).onChange(F),I.add(y.material2,"roughness",0,1).onChange(F),I.add(y.material2,"metalness",0,1).onChange(F),I.add(y.material2,"opacity",0,1).onChange(F),I.add(y.material2,"transmission",0,1).onChange(F),I.add(y.material2,"ior",.9,3).onChange(F),I.add(y.material2,"matte").onChange(F),I.add(y.material2,"castShadow").onChange(F),I.close();const E=R.addFolder("Floor Material");E.addColor(y.material3,"color").onChange(F),E.add(y.material3,"roughness",0,1).onChange(F),E.add(y.material3,"metalness",0,1).onChange(F),E.add(y.material3,"matte").onChange(F),E.add(y.material3,"castShadow").onChange(F),E.close(),M()}();
//# sourceMappingURL=texture.203f2c0d.js.map
